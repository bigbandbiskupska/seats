-- Adminer 4.6.2 MySQL dump

SET NAMES utf8;
SET time_zone = '+00:00';
SET foreign_key_checks = 0;
SET sql_mode = 'NO_AUTO_VALUE_ON_ZERO';

DROP TABLE IF EXISTS `allowed_limit`;
CREATE TABLE `allowed_limit` (
  `user_id` int(11) NOT NULL,
  `schema_id` int(11) NOT NULL,
  `limit` int(11) NOT NULL DEFAULT '5',
  KEY `user_id` (`user_id`),
  KEY `schema_id` (`schema_id`),
  CONSTRAINT `allowed_limit_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `allowed_limit_ibfk_2` FOREIGN KEY (`schema_id`) REFERENCES `schemas` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `allowed_limit` (`user_id`, `schema_id`, `limit`) VALUES
(1,	1,	5),
(1,	2,	5),
(2,	1,	5),
(2,	2,	5),
(3,	1,	5),
(3,	2,	10);

DROP TABLE IF EXISTS `reservations`;
CREATE TABLE `reservations` (
  `seat_id` int(11) NOT NULL,
  `ticket_id` int(11) NOT NULL,
  `note` varchar(255) CHARACTER SET latin1 NOT NULL,
  `price` int(11) NOT NULL,
  KEY `seat_id` (`seat_id`),
  KEY `ticket_id` (`ticket_id`),
  PRIMARY KEY (`seat_id`, `ticket_id`),
  CONSTRAINT `reservations_ibfk_1` FOREIGN KEY (`seat_id`) REFERENCES `seats` (`id`) ON DELETE RESTRICT,
  CONSTRAINT `reservations_ibfk_2` FOREIGN KEY (`ticket_id`) REFERENCES `tickets` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `schemas`;
CREATE TABLE `schemas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `limit` int(11) NOT NULL DEFAULT '5',
  `price` int(11) NOT NULL,
  `hidden` tinyint(4) NOT NULL DEFAULT '0',
  `locked` tinyint(4) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `schemas` (`id`, `name`, `limit`, `price`, `hidden`, `locked`) VALUES
(1,	'Vánoční koncert',	5,	250,	1,	0),
(2,	'Velikonoční koncert',	5,	100,	0,	1);

DROP TABLE IF EXISTS `seats`;
CREATE TABLE `seats` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `schema_id` int(11) NOT NULL,
  `state` int(11) NOT NULL DEFAULT '1',
  `price` int(11) NOT NULL,
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  `row` int(11) NOT NULL,
  `col` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `schema_id` (`schema_id`),
  CONSTRAINT `seats_14ac_1` FOREIGN KEY (`schema_id`) REFERENCES `schemas` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `seats` (`id`, `schema_id`, `state`, `price`, `x`, `y`, `row`, `col`) VALUES
(1,	1,	1,	250,	1,	1,	1,	1),
(2,	1,	1,	250,	1,	2,	1,	2),
(3,	1,	1,	250,	1,	3,	1,	3),
(4,	1,	1,	250,	1,	4,	1,	4),
(5,	1,	1,	250,	1,	5,	1,	5),
(6,	1,	1,	250,	1,	6,	1,	6),
(7,	1,	1,	250,	1,	7,	1,	7),
(8,	1,	1,	250,	1,	8,	1,	8),
(9,	1,	1,	250,	1,	9,	1,	9),
(10,	1,	1,	250,	1,	10,	1,	10),
(11,	1,	1,	250,	2,	1,	2,	1),
(12,	1,	1,	250,	2,	2,	2,	2),
(13,	1,	1,	250,	2,	3,	2,	3),
(14,	1,	1,	250,	2,	4,	2,	4),
(15,	1,	1,	250,	2,	5,	2,	5),
(16,	1,	1,	250,	2,	6,	2,	6),
(17,	1,	1,	250,	2,	7,	2,	7),
(18,	1,	1,	250,	2,	8,	2,	8),
(19,	1,	1,	250,	2,	9,	2,	9),
(20,	1,	1,	250,	2,	10,	2,	10),
(21,	1,	1,	250,	3,	1,	3,	1),
(22,	1,	1,	250,	3,	2,	3,	2),
(23,	1,	1,	250,	3,	3,	3,	3),
(24,	1,	1,	250,	3,	4,	3,	4),
(25,	1,	1,	250,	3,	5,	3,	5),
(26,	1,	1,	250,	3,	6,	3,	6),
(27,	1,	1,	250,	3,	7,	3,	7),
(28,	1,	1,	250,	3,	8,	3,	8),
(29,	1,	1,	250,	3,	9,	3,	9),
(30,	1,	1,	250,	3,	10,	3,	10),
(31,	1,	1,	250,	4,	1,	4,	1),
(32,	1,	1,	250,	4,	2,	4,	2),
(33,	1,	1,	250,	4,	3,	4,	3),
(34,	1,	1,	250,	4,	4,	4,	4),
(35,	1,	1,	250,	4,	5,	4,	5),
(36,	1,	1,	250,	4,	6,	4,	6),
(37,	1,	1,	250,	4,	7,	4,	7),
(38,	1,	1,	250,	4,	8,	4,	8),
(39,	1,	1,	250,	4,	9,	4,	9),
(40,	1,	1,	250,	4,	10,	4,	10),
(41,	1,	1,	250,	5,	1,	5,	1),
(42,	1,	1,	250,	5,	2,	5,	2),
(43,	1,	1,	250,	5,	3,	5,	3),
(44,	1,	1,	250,	5,	4,	5,	4),
(45,	1,	1,	250,	5,	5,	5,	5),
(46,	1,	1,	250,	5,	6,	5,	6),
(47,	1,	1,	250,	5,	7,	5,	7),
(48,	1,	1,	250,	5,	8,	5,	8),
(49,	1,	1,	250,	5,	9,	5,	9),
(50,	1,	1,	250,	5,	10,	5,	10),
(51,	1,	1,	250,	6,	1,	6,	1),
(52,	1,	1,	250,	6,	2,	6,	2),
(53,	1,	1,	250,	6,	3,	6,	3),
(54,	1,	1,	250,	6,	4,	6,	4),
(55,	1,	1,	250,	6,	5,	6,	5),
(56,	1,	1,	250,	6,	6,	6,	6),
(57,	1,	1,	250,	6,	7,	6,	7),
(58,	1,	1,	250,	6,	8,	6,	8),
(59,	1,	1,	250,	6,	9,	6,	9),
(60,	1,	1,	250,	6,	10,	6,	10),
(61,	1,	1,	250,	7,	1,	7,	1),
(62,	1,	1,	250,	7,	2,	7,	2),
(63,	1,	1,	250,	7,	3,	7,	3),
(64,	1,	1,	250,	7,	4,	7,	4),
(65,	1,	1,	250,	7,	5,	7,	5),
(66,	1,	1,	250,	7,	6,	7,	6),
(67,	1,	1,	250,	7,	7,	7,	7),
(68,	1,	1,	250,	7,	8,	7,	8),
(69,	1,	1,	250,	7,	9,	7,	9),
(70,	1,	1,	250,	7,	10,	7,	10),
(71,	1,	1,	250,	8,	1,	8,	1),
(72,	1,	1,	250,	8,	2,	8,	2),
(73,	1,	1,	250,	8,	3,	8,	3),
(74,	1,	1,	250,	8,	4,	8,	4),
(75,	1,	1,	250,	8,	5,	8,	5),
(76,	1,	1,	250,	8,	6,	8,	6),
(77,	1,	1,	250,	8,	7,	8,	7),
(78,	1,	1,	250,	8,	8,	8,	8),
(79,	1,	1,	250,	8,	9,	8,	9),
(80,	1,	1,	250,	8,	10,	8,	10),
(81,	1,	1,	250,	9,	1,	9,	1),
(82,	1,	1,	250,	9,	2,	9,	2),
(83,	1,	1,	250,	9,	3,	9,	3),
(84,	1,	1,	250,	9,	4,	9,	4),
(85,	1,	1,	250,	9,	5,	9,	5),
(86,	1,	1,	250,	9,	6,	9,	6),
(87,	1,	1,	250,	9,	7,	9,	7),
(88,	1,	1,	250,	9,	8,	9,	8),
(89,	1,	1,	250,	9,	9,	9,	9),
(90,	1,	1,	250,	9,	10,	9,	10),
(91,	1,	1,	250,	10,	1,	10,	1),
(92,	1,	1,	250,	10,	2,	10,	2),
(93,	1,	1,	250,	10,	3,	10,	3),
(94,	1,	1,	250,	10,	4,	10,	4),
(95,	1,	1,	250,	10,	5,	10,	5),
(96,	1,	1,	250,	10,	6,	10,	6),
(97,	1,	1,	250,	10,	7,	10,	7),
(98,	1,	1,	250,	10,	8,	10,	8),
(99,	1,	1,	250,	10,	9,	10,	9),
(100,	1,	1,	250,	10,	10,	10,	10),
(101,	2,	1,	100,	1,	1,	1,	1),
(102,	2,	1,	100,	1,	2,	1,	2),
(103,	2,	1,	100,	1,	3,	1,	3),
(104,	2,	1,	100,	1,	4,	1,	4),
(105,	2,	1,	100,	1,	5,	1,	5),
(106,	2,	1,	100,	1,	6,	1,	6),
(107,	2,	1,	100,	1,	7,	1,	7),
(108,	2,	1,	100,	1,	8,	1,	8),
(109,	2,	1,	100,	1,	9,	1,	9),
(110,	2,	1,	100,	1,	10,	1,	10),
(111,	2,	1,	100,	2,	1,	2,	1),
(112,	2,	1,	100,	2,	2,	2,	2),
(113,	2,	1,	100,	2,	3,	2,	3),
(114,	2,	1,	100,	2,	4,	2,	4),
(115,	2,	1,	100,	2,	5,	2,	5),
(116,	2,	1,	100,	2,	6,	2,	6),
(117,	2,	1,	100,	2,	7,	2,	7),
(118,	2,	1,	100,	2,	8,	2,	8),
(119,	2,	1,	100,	2,	9,	2,	9),
(120,	2,	1,	100,	2,	10,	2,	10),
(121,	2,	1,	100,	3,	1,	3,	1),
(122,	2,	1,	100,	3,	2,	3,	2),
(123,	2,	1,	100,	3,	3,	3,	3),
(124,	2,	1,	100,	3,	4,	3,	4),
(125,	2,	1,	100,	3,	5,	3,	5),
(126,	2,	1,	100,	3,	6,	3,	6),
(127,	2,	1,	100,	3,	7,	3,	7),
(128,	2,	1,	100,	3,	8,	3,	8),
(129,	2,	1,	100,	3,	9,	3,	9),
(130,	2,	1,	100,	3,	10,	3,	10),
(131,	2,	1,	100,	4,	1,	4,	1),
(132,	2,	1,	100,	4,	2,	4,	2),
(133,	2,	1,	100,	4,	3,	4,	3),
(134,	2,	1,	100,	4,	4,	4,	4),
(135,	2,	1,	100,	4,	5,	4,	5),
(136,	2,	1,	100,	4,	6,	4,	6),
(137,	2,	1,	100,	4,	7,	4,	7),
(138,	2,	1,	100,	4,	8,	4,	8),
(139,	2,	1,	100,	4,	9,	4,	9),
(140,	2,	1,	100,	4,	10,	4,	10),
(141,	2,	1,	100,	5,	1,	5,	1),
(142,	2,	1,	100,	5,	2,	5,	2),
(143,	2,	1,	100,	5,	3,	5,	3),
(144,	2,	1,	100,	5,	4,	5,	4),
(145,	2,	1,	100,	5,	5,	5,	5),
(146,	2,	1,	100,	5,	6,	5,	6),
(147,	2,	1,	100,	5,	7,	5,	7),
(148,	2,	1,	100,	5,	8,	5,	8),
(149,	2,	1,	100,	5,	9,	5,	9),
(150,	2,	1,	100,	5,	10,	5,	10),
(151,	2,	1,	100,	6,	1,	6,	1),
(152,	2,	1,	100,	6,	2,	6,	2),
(153,	2,	1,	100,	6,	3,	6,	3),
(154,	2,	1,	100,	6,	4,	6,	4),
(155,	2,	1,	100,	6,	5,	6,	5),
(156,	2,	1,	100,	6,	6,	6,	6),
(157,	2,	1,	100,	6,	7,	6,	7),
(158,	2,	1,	100,	6,	8,	6,	8),
(159,	2,	1,	100,	6,	9,	6,	9),
(160,	2,	1,	100,	6,	10,	6,	10),
(161,	2,	1,	100,	7,	1,	7,	1),
(162,	2,	1,	100,	7,	2,	7,	2),
(163,	2,	1,	100,	7,	3,	7,	3),
(164,	2,	1,	100,	7,	4,	7,	4),
(165,	2,	1,	100,	7,	5,	7,	5),
(166,	2,	1,	100,	7,	6,	7,	6),
(167,	2,	1,	100,	7,	7,	7,	7),
(168,	2,	1,	100,	7,	8,	7,	8),
(169,	2,	1,	100,	7,	9,	7,	9),
(170,	2,	1,	100,	7,	10,	7,	10),
(171,	2,	1,	100,	8,	1,	8,	1),
(172,	2,	1,	100,	8,	2,	8,	2),
(173,	2,	1,	100,	8,	3,	8,	3),
(174,	2,	1,	100,	8,	4,	8,	4),
(175,	2,	1,	100,	8,	5,	8,	5),
(176,	2,	1,	100,	8,	6,	8,	6),
(177,	2,	1,	100,	8,	7,	8,	7),
(178,	2,	1,	100,	8,	8,	8,	8),
(179,	2,	1,	100,	8,	9,	8,	9),
(180,	2,	1,	100,	8,	10,	8,	10),
(181,	2,	1,	100,	9,	1,	9,	1),
(182,	2,	1,	100,	9,	2,	9,	2),
(183,	2,	1,	100,	9,	3,	9,	3),
(184,	2,	1,	100,	9,	4,	9,	4),
(185,	2,	1,	100,	9,	5,	9,	5),
(186,	2,	1,	100,	9,	6,	9,	6),
(187,	2,	1,	100,	9,	7,	9,	7),
(188,	2,	1,	100,	9,	8,	9,	8),
(189,	2,	1,	100,	9,	9,	9,	9),
(190,	2,	1,	100,	9,	10,	9,	10),
(191,	2,	1,	100,	10,	1,	10,	1),
(192,	2,	1,	100,	10,	2,	10,	2),
(193,	2,	1,	100,	10,	3,	10,	3),
(194,	2,	1,	100,	10,	4,	10,	4),
(195,	2,	1,	100,	10,	5,	10,	5),
(196,	2,	1,	100,	10,	6,	10,	6),
(197,	2,	1,	100,	10,	7,	10,	7),
(198,	2,	1,	100,	10,	8,	10,	8),
(199,	2,	1,	100,	10,	9,	10,	9),
(200,	2,	1,	100,	10,	10,	10,	10),
(201,	2,	1,	100,	11,	1,	11,	1),
(202,	2,	1,	100,	11,	2,	11,	2),
(203,	2,	1,	100,	11,	3,	11,	3),
(204,	2,	1,	100,	11,	4,	11,	4),
(205,	2,	1,	100,	11,	5,	11,	5),
(206,	2,	1,	100,	11,	6,	11,	6),
(207,	2,	1,	100,	11,	7,	11,	7),
(208,	2,	1,	100,	11,	8,	11,	8),
(209,	2,	1,	100,	11,	9,	11,	9),
(210,	2,	1,	100,	11,	10,	11,	10),
(211,	2,	1,	100,	12,	1,	12,	1),
(212,	2,	1,	100,	12,	2,	12,	2),
(213,	2,	1,	100,	12,	3,	12,	3),
(214,	2,	1,	100,	12,	4,	12,	4),
(215,	2,	1,	100,	12,	5,	12,	5),
(216,	2,	1,	100,	12,	6,	12,	6),
(217,	2,	1,	100,	12,	7,	12,	7),
(218,	2,	1,	100,	12,	8,	12,	8),
(219,	2,	1,	100,	12,	9,	12,	9),
(220,	2,	1,	100,	12,	10,	12,	10),
(221,	2,	1,	100,	13,	1,	13,	1),
(222,	2,	1,	100,	13,	2,	13,	2),
(223,	2,	1,	100,	13,	3,	13,	3),
(224,	2,	1,	100,	13,	4,	13,	4),
(225,	2,	1,	100,	13,	5,	13,	5),
(226,	2,	1,	100,	13,	6,	13,	6),
(227,	2,	1,	100,	13,	7,	13,	7),
(228,	2,	1,	100,	13,	8,	13,	8),
(229,	2,	1,	100,	13,	9,	13,	9),
(230,	2,	1,	100,	13,	10,	13,	10),
(231,	2,	1,	100,	14,	1,	14,	1),
(232,	2,	1,	100,	14,	2,	14,	2),
(233,	2,	1,	100,	14,	3,	14,	3),
(234,	2,	1,	100,	14,	4,	14,	4),
(235,	2,	1,	100,	14,	5,	14,	5),
(236,	2,	1,	100,	14,	6,	14,	6),
(237,	2,	1,	100,	14,	7,	14,	7),
(238,	2,	1,	100,	14,	8,	14,	8),
(239,	2,	1,	100,	14,	9,	14,	9),
(240,	2,	1,	100,	14,	10,	14,	10),
(241,	2,	1,	100,	15,	1,	15,	1),
(242,	2,	1,	100,	15,	2,	15,	2),
(243,	2,	1,	100,	15,	3,	15,	3),
(244,	2,	1,	100,	15,	4,	15,	4),
(245,	2,	1,	100,	15,	5,	15,	5),
(246,	2,	1,	100,	15,	6,	15,	6),
(247,	2,	1,	100,	15,	7,	15,	7),
(248,	2,	1,	100,	15,	8,	15,	8),
(249,	2,	1,	100,	15,	9,	15,	9),
(250,	2,	1,	100,	15,	10,	15,	10),
(251,	2,	1,	100,	16,	1,	16,	1),
(252,	2,	1,	100,	16,	2,	16,	2),
(253,	2,	1,	100,	16,	3,	16,	3),
(254,	2,	1,	100,	16,	4,	16,	4),
(255,	2,	1,	100,	16,	5,	16,	5),
(256,	2,	1,	100,	16,	6,	16,	6),
(257,	2,	1,	100,	16,	7,	16,	7),
(258,	2,	1,	100,	16,	8,	16,	8),
(259,	2,	1,	100,	16,	9,	16,	9),
(260,	2,	1,	100,	16,	10,	16,	10),
(261,	2,	1,	100,	17,	1,	17,	1),
(262,	2,	1,	100,	17,	2,	17,	2),
(263,	2,	1,	100,	17,	3,	17,	3),
(264,	2,	1,	100,	17,	4,	17,	4),
(265,	2,	1,	100,	17,	5,	17,	5),
(266,	2,	1,	100,	17,	6,	17,	6),
(267,	2,	1,	100,	17,	7,	17,	7),
(268,	2,	1,	100,	17,	8,	17,	8),
(269,	2,	1,	100,	17,	9,	17,	9),
(270,	2,	1,	100,	17,	10,	17,	10),
(271,	2,	1,	100,	18,	1,	18,	1),
(272,	2,	1,	100,	18,	2,	18,	2),
(273,	2,	1,	100,	18,	3,	18,	3),
(274,	2,	1,	100,	18,	4,	18,	4),
(275,	2,	1,	100,	18,	5,	18,	5),
(276,	2,	1,	100,	18,	6,	18,	6),
(277,	2,	1,	100,	18,	7,	18,	7),
(278,	2,	1,	100,	18,	8,	18,	8),
(279,	2,	1,	100,	18,	9,	18,	9),
(280,	2,	1,	100,	18,	10,	18,	10),
(281,	2,	1,	100,	19,	1,	19,	1),
(282,	2,	1,	100,	19,	2,	19,	2),
(283,	2,	1,	100,	19,	3,	19,	3),
(284,	2,	1,	100,	19,	4,	19,	4),
(285,	2,	1,	100,	19,	5,	19,	5),
(286,	2,	1,	100,	19,	6,	19,	6),
(287,	2,	1,	100,	19,	7,	19,	7),
(288,	2,	1,	100,	19,	8,	19,	8),
(289,	2,	1,	100,	19,	9,	19,	9),
(290,	2,	1,	100,	19,	10,	19,	10),
(291,	2,	1,	100,	20,	1,	20,	1),
(292,	2,	1,	100,	20,	2,	20,	2),
(293,	2,	1,	100,	20,	3,	20,	3),
(294,	2,	1,	100,	20,	4,	20,	4),
(295,	2,	1,	100,	20,	5,	20,	5),
(296,	2,	1,	100,	20,	6,	20,	6),
(297,	2,	1,	100,	20,	7,	20,	7),
(298,	2,	1,	100,	20,	8,	20,	8),
(299,	2,	1,	100,	20,	9,	20,	9),
(300,	2,	1,	100,	20,	10,	20,	10);

DROP TABLE IF EXISTS `tickets`;
CREATE TABLE `tickets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `schema_id` int(11) NOT NULL,
  `note` varchar(255) NOT NULL,
  `confirmed` tinyint(4) NOT NULL DEFAULT '0',
  `packaged` tinyint(4) NOT NULL DEFAULT '0',
  `created_at` datetime NOT NULL,
  `updated_at` datetime NOT NULL,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `tickets_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `tickets_ibfk_2` FOREIGN KEY (`schema_id`) REFERENCES `schemas` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `surname` varchar(255) NOT NULL,
  `email` varchar(255) NOT NULL UNIQUE,
  `password` varchar(255) NOT NULL,
  `roles` varchar(255) NOT NULL DEFAULT 'user',
  `token` varchar(255) NOT NULL,
  `expires_at` datetime NOT NULL,
  `last_click_at` datetime NULL,
  `ip_address` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- pass: 123456
INSERT INTO `users` (`id`, `name`, `surname`, `email`, `password`, `roles`, `token`, `expires_at`, `ip_address`) VALUES
(1, 'James',  'Bond', 'james@bond.com', '$2y$10$eBbCO28jNeNNLQSV4P8xOuY9zbHMu8VinVUvFAffCTdBd/YI6lIY.', 'administrator,user', 'abcd', '2018-05-08 16:55:15',  '8.8.8.8'),
(2, 'Daniel', 'Craig',  'daniel@craig.com', '$2y$10$eBbCO28jNeNNLQSV4P8xOuY9zbHMu8VinVUvFAffCTdBd/YI6lIY.', 'guest', '1234', '2018-05-08 16:55:09',  '8.8.8.8'),
(3, 'Pat',  'Mat', 'pat@mat.cz', '$2y$10$eBbCO28jNeNNLQSV4P8xOuY9zbHMu8VinVUvFAffCTdBd/YI6lIY.',  'user', 'qwer', '2018-05-08 16:55:15',  '8.8.8.8');

-- 2018-04-08 16:56:41

